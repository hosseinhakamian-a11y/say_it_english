# ๐ด Say It English - ุญุงูุธู ูพุฑูฺู (MANA_MEMORY.md)

## ๐ ุชุงุฑุฎ ุขุฎุฑู ุจุฑูุฒุฑุณุงู: ฑท ุจููู ฑดฐด (2026-02-06) - ุณุงุนุช ฑฒ:ดฐ ุชูุฑุงู

---

## โ ุชุบุฑุงุช ุงุฎุฑ (ฑท ุจููู ฑดฐด - ุจุฎุด ุฏูู)

### 4. ฺฉูพุงุฑฺูโุณุงุฒ ู ุชุนูุฑ ุณุณุชู ุงุญุฑุงุฒ ููุช (Unified Session Fix)
- **ุณุดู ฺฉูพุงุฑฺู:** ุงุฏุบุงู ฺฉุงูู ุณุณุชู ูุฑูุฏ ุจุง **ุฑูุฒ ุนุจูุฑ** ู **ูพุงูฺฉ (SMS)**. ุญุงูุง ูุฑ ุฏู ุฑูุด ุงุฒ ฺฉ ฺฉูฺฉ ุณุดู ูุงุญุฏ ู ุงูู ุงุณุชูุงุฏู ูโฺฉููุฏ.
- **ุจูููโุณุงุฒ ฺฉูฺฉ:** ูพุงุฏูโุณุงุฒ ูุชุฏ `setSessionCookie` ุฏุฑ ุจฺฉโุงูุฏ (`api/index.ts`) ุจุฑุง ุชูุธู ุฏูู ูุฏุฑูุง `HttpOnly`ุ `Secure` ู `SameSite=Lax` ุฌูุช ุณุงุฒฺฏุงุฑ ฺฉุงูู ุจุง Vercel.
- **ููฺฏุงูโุณุงุฒ ูุฑุงูุชโุงูุฏ:** ุจุงุฒููุณ ูุงุฌฺฉ `verifyOtp` ุฏุฑ `use-auth.ts` ุจุง ุงุณุชูุงุฏู ุงุฒ `useMutation`. ุญุงูุง ุจูุงูุงุตูู ูพุณ ุงุฒ ุชุงุฏ ูพุงูฺฉุ ฺฉุด ฺฉุงุฑุจุฑ ุขูพุฏุช ูโุดูุฏ ู ูุงุฒ ุจู ุฑูุฑุด ุตูุญู ูุณุช.
- **ุชุฌุฑุจู ฺฉุงุฑุจุฑ (UX):** ุญุฐู ูุฑุญููโ ุงุฌุจุงุฑ/ฺฏุฌโฺฉููุฏู "ุชุนู ุฑูุฒ ุนุจูุฑ" ุจุนุฏ ุงุฒ ูุฑูุฏ ูพุงูฺฉ. ฺฉุงุฑุจุฑ ุจูุงูุงุตูู ูพุณ ุงุฒ ูุฑูุฏ ูููู ุจู ุตูุญู ุงุตู/ูพุฑููุงู ุฑุฏุงุฑฺฉุช ูโุดูุฏ.
- **ุฏุณุชุฑุณ ุงุฏูู:** ุดูุงุฑูโูุง `09222453571` ู `09123104254` ุจูโุตูุฑุช ุฎูุฏฺฉุงุฑ ุฏุฑ ููฺฏุงู ูุฑูุฏ ุง ุซุจุชโูุงู ุจู ููุด `admin` ุงุฑุชูุง ูโุงุจูุฏ.
- **ุฏุงูููุฏ ุงูู (Secure Storage):** ุงุชุตุงู ุจู **ArvanCloud** ุจุฑุง ูุฒุจุงู ูุงูโูุง ูพูู. ููฺฉโูุง ููุท ุจุฑุง ุฎุฑุฏุงุฑุงู ู ุจู ูุฏุช ฑ ุณุงุนุช ูุนุชุจุฑ ูุณุชูุฏ.
- **ุงุณุชุฑู ูุฏู (Secure Streaming):** ูุงุจูุช ูพุฎุด ุขููุงู ูุฏููุง ูพูู ุจุง ุงุณุชูุงุฏู ุงุฒ ูพูุฑ ุงุฎุชุตุงุต (`SecureVideoPlayer`) ฺฉู ููฺฉ ูุณุชูู ุฏุงูููุฏ ุฑุง ูุฎู ูโฺฉูุฏ (ุงุณุชูุงุฏู ุงุฒ `Content-Disposition: inline`).

### ูุงุฒูุง ูุญุท (.env)
- `ARVAN_ACCESS_KEY`, `ARVAN_SECRET_KEY`, `ARVAN_ENDPOINT`, `ARVAN_BUCKET_NAME`

---

## โ ุชุบุฑุงุช ุงูุฑูุฒ (ฑท ุจููู ฑดฐด - ุจุฎุด ุงูู)

### 1. ุชุญูู ุฏุฑ ุณุณุชู ุงุญุฑุงุฒ ููุช (Authentication)
- **ูุฑูุฏ ุจุง ูพุงูฺฉ (OTP):** ุงุชุตุงู ุจู ูพูู `sms.ir` ุจุฑุง ูุฑูุฏ ุณุฑุน ุจุง ุดูุงุฑู ููุจุงู.
- **ูุงูุจ ูพุงูฺฉ:** ุงุณุชูุงุฏู ุงุฒ ูพุงุฑุงูุชุฑ `CODE` ุฏุฑ ูุงูุจ ุชุงุฏู ุจุฑุง ุงุฑุณุงู ููุฑ (Service).
- **ูุฑูุฏ ุจุง ฺฏูฺฏู:** ูพุงุฏูโุณุงุฒ Google OAuth2.0 ุจุฑุง ุซุจุชโูุงู ู ูุฑูุฏ ฺฉูพุงุฑฺู.
- **ูุฏุฑุช ุฑูุฒ ุนุจูุฑ:** ุงูฺฉุงู ุชุนุฑู/ุชุบุฑ ฺฉููู ุนุจูุฑ ุจุฑุง ฺฉุงุฑุจุฑุงู ฺฉู ุจุง ุฑูุดโูุง ุณุฑุน ูุงุฑุฏ ุดุฏูโุงูุฏ.
- **ุฑูุน ุจุงฺฏ ุณุดู:** (ุฌุฏุฏ) ุญู ูุดฺฉู ุนุฏู ุฐุฎุฑู ฺฉูฺฉ ุณุดู ุฏุฑ ุญุงูุช ูุฑูุฏ ูพุงูฺฉ ู ฺฉุณุงูโุณุงุฒ ุขู ุจุง ูุฑูุฏ ุฑูุฒ ุนุจูุฑ.

### 2. ุณุณุชู ูพุฑุฏุงุฎุช ฺูุฏฺฏุงูู
- **ูพุดุชุจุงู ุงุฒ ุฑูุฒ ุงุฑุฒ (Crypto):** ุงูฺฉุงู ุฎุฑุฏ ุฏูุฑูโูุง ุจุง USDT ุฑู ุดุจฺฉู **BEP20 (BSC)**.
- **ุขุฏุฑุณ ููุช:** `0x2ca84105e9e3f3a91f0385acbd497923d743a342`
- **ุฑูฺฏุฑ ุชุฑุงฺฉูุด:** ุงุถุงูู ุดุฏู ููุฏ **Transaction Hash** ุจุฑุง ูพุฑุฏุงุฎุชโูุง ฺฉุฑูพุชู ู ููุงููฺฏ ุจุง ูุฏุฑุช ุงุฏูู.

### 3. ุงุตูุงุญุงุช ุฒุฑุณุงุฎุช
- **ูุญุท ุชูุณุนู ููฺฉุงู:** ููุฏ ุฎูุฏฺฉุงุฑ `.env.local` ุจุง ุงุณุชูุงุฏู ุงุฒ `loadEnvFile` ูุชู Node.js ุฏุฑ ุชูุงู ุงุณฺฉุฑูพุชโูุง.
- **ุงูุชูุงู ฺฏุช:** ุฑููุช ูพุฑูฺู ุจู `hosseinhakamian-a11y/say_it_english` ุชุบุฑ ุงูุช.
- **ุงุณุชูุฑุงุฑ (Deploy):** ุจูุฏ ูููู ุฏุฑ Vercel ู ุงุนูุงู ุชุบุฑุงุช ุฌุฏุฏ ุฏุฑ ุฏุชุงุจุณ Supabase ุจุง `db:push`.

---

## ๐ ูุถุนุช ูุนู ูพุฑูฺู
- **Deploy**: Vercel (hosseinhakamian-a11y.vercel.app)
- **ุฏุชุงุจุณ**: Supabase (PostgreSQL) - ุงุณฺฉูุง ุจูโุฑูุฒ ุดุฏู ุจุง ูพฺฉุฌ Drizzle.
- **ุงุญุฑุงุฒ ููุช**: ฺฉูพุงุฑฺู ู ุงูู (Session-based Cookie). ูพุดุชุจุงู ุงุฒ SMSุ ูพุณูุฑุฏ ู ฺฏูฺฏู.
- **ูพุฑุฏุงุฎุช**: ุจุงูฺฉ (ฺฉุงุฑุช ุจู ฺฉุงุฑุช) + ุฑูุฒ ุงุฑุฒ (BEP20).

---

## ๐ฏ ฺฉุงุฑูุง ุจุงูโูุงูุฏู
- [ ] **ูพูู ูุฏุฑุช ุงุฏูู:** ุงุถุงูู ฺฉุฑุฏู ุชุจ ุชุงุฏ ุชุฑุงฺฉูุดโูุง ฺฉุฑูพุชู (ููุงุด ุฏฺฉูู ููฺฉ ุจู BscScan).
- [ ] **Template ID:** ุฌุงฺฏุฐุงุฑ ุขุฏุฑุณ ููุง ุดูุงุณู ูุงูุจ ุฏุฑ ูพูู ูุฑุณู ุจุฑุง SMS.ir.
- [ ] **Google API Keys:** ุชูุธู Client ID ู Secret ุฏุฑ ูพูู ูุฑุณู.

---

## ๐ ูุงูโูุง ฺฉูุฏ ุงุถุงูู/ุงุตูุงุญ ุดุฏู
| ูุงู | ุชูุถุญ |
|------|-------|
| `api/index.ts` | ูุฏุฑุช ูุฑฺฉุฒ ุณุดูโูุงุ ููุฏููฺฏ ฺฉูฺฉ ู ุฑูุชโูุง API |
| `client/src/hooks/use-auth.ts` | ุงุถุงูู ุดุฏู Mutation ุจุฑุง OTP Verify ู ุณูฺฉ ฺฉุด |
| `server/sms.ts` | ุณุฑูุณ ุงุฑุณุงู ูพุงูฺฉ ุงุฒ ุทุฑู sms.ir |
| `server/auth.ts` | ูุฏุฑุช Google Auth |
| `shared/schema.ts` | ุจูโุฑูุฒุฑุณุงู ุฌุฏุงูู `users` ู `payments` |
| `client/src/pages/Auth.tsx` | ูุงุฌฺฉ ุฑุฏุงุฑฺฉุช ููุดููุฏ ู ูุฑูโูุง ูุฑูุฏ |
| `client/src/pages/Payment.tsx` | ูุฑู ููุดููุฏ ูพุฑุฏุงุฎุช ุฏูฺฏุงูู (Card/Crypto) |
| `server/db.ts` | ููุทู ููุดููุฏ ููุฏ ูุญุท ุชูุณุนู |

---

## ๐ ุงุทูุงุนุงุช ุชูุงุณ
- **ุดูุงุฑู ุงุณุชุงุฏ**: ฐนฑฒณฑฐดฒตด
- **ฺฉุงูุงู ูุชูุจ**: @say.it.english
- **ุขุฏุฑุณ ููุช ฺฉุฑูพุชู (BEP20)**: `0x2ca84105e9e3f3a91f0385acbd497923d743a342`

---
*ุงู ูุงู "ุญุงูุธู ุฒูุฏู" ูพุฑูฺู ุงุณุช. ูุฑ ุฌูุณู ุงุฒ ุงูุฌุง ุดุฑูุน ูโฺฉูู.*
